import React, { useEffect, useState } from 'react';
import Store from '../../utils/Store';

const SuccessWindow = () => {

    const [isOpen, setIsOpen] = useState('')
    const [mode, setMode] = useState('')

    Store.useListener('openSuccess', setIsOpen)
    Store.useListener('successWindowMode', setMode)
    

    const closeMenu = () => {
        document.body.style.overflow = 'visible'
        setIsOpen('')
    }

    useEffect(() => {

        window.addEventListener('click', closeMenu)

        return () => {
            window.removeEventListener('click', closeMenu)
        }

    }, [])

    return (
        <div className={`modal_wrapper ${isOpen}`} onMouseDown={(e) => e.stopPropagation()}>

            <div className={`success_window ${mode}`}>
                <div className="success_window_header">
                    <p>Данные отправлены</p>
                    <div className="cross" onClick={closeMenu}></div>
                </div>

                <svg width="922" viewBox="0 0 922 84" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M54.6797 2.35414C61.3796 2.35414 67.287 3.45987 72.402 5.67133C77.589 7.8828 81.5873 10.986 84.3969 14.9809C87.2786 18.9045 88.7195 23.4701 88.7195 28.6777V29.1057C88.7195 37.8803 86.234 44.5503 81.2631 49.1159C76.2923 53.6102 68.7639 55.8573 58.678 55.8573H14.1562V81.5388H0V2.35414H54.6797ZM53.9233 43.9796C58.2458 43.9796 61.7758 43.7299 64.5134 43.2306C67.323 42.7312 69.7004 41.4471 71.6456 39.3783C73.6627 37.2382 74.6713 33.921 74.6713 29.4268C74.6713 24.7185 73.6627 21.2586 71.6456 19.0471C69.7004 16.7643 67.3591 15.3732 64.6215 14.8739C61.8839 14.3745 58.3178 14.1248 53.9233 14.1248H49.2766C47.1874 14.1248 43.5853 14.1605 38.4703 14.2318C33.4274 14.2318 25.2867 14.2318 14.0481 14.2318L14.1562 43.9796H53.9233Z" />
                    <path d="M201.808 81.5388H186.679L176.629 63.1338H123.57L113.521 81.5388H98.3919L141.725 2.35414H158.475L201.808 81.5388ZM150.154 14.6599L130.703 50.079H169.497L150.154 14.6599Z" />
                    <path d="M300.905 81.3248L278.752 55.7503H244.064V81.3248H229.908V2.14013H284.587C291.287 2.14013 297.195 3.24586 302.31 5.45732C307.497 7.66879 311.495 10.772 314.305 14.7669C317.186 18.6904 318.627 23.2561 318.627 28.4637V28.8917C318.627 35.6688 316.61 41.2688 312.576 45.6917C308.613 50.1146 303.102 53.0752 296.042 54.5732L319.275 81.3248H300.905ZM303.606 29.4268C303.606 24.7185 302.706 21.2943 300.905 19.1541C299.176 16.9427 296.978 15.5873 294.313 15.0879C291.719 14.5885 288.081 14.3389 283.399 14.3389C281.309 14.3389 279.508 14.3745 277.995 14.4459C270.791 14.7312 259.481 14.8739 244.064 14.8739V43.5516H283.399C288.081 43.5516 291.719 43.3376 294.313 42.9095C296.978 42.4102 299.176 41.1618 300.905 39.1643C302.706 37.0955 303.606 33.8497 303.606 29.4268Z" />
                    <path d="M349.519 14.3389V2.35414H438.239L349.519 14.3389ZM438.239 2.35414V14.6599H401.173V81.5388H387.125V14.6599H349.519V2.35414H438.239Z" />
                    <path d="M485.261 81.5388H471.212V2.35414L485.261 81.5388ZM547.937 62.3847V2.35414H561.985V81.5388H547.937L485.261 21.4013V81.5388H471.212V2.35414H485.261L547.937 62.3847Z" />
                    <path d="M667.45 46.2267H610.609V69.6611L676.527 69.2331V81.5388H596.561V2.35414H676.527L676.635 14.6599H610.609V33.921H667.45V46.2267Z" />
                    <path d="M780.559 81.3248L758.407 55.7503H723.719V81.3248H709.562V2.14013H764.242C770.942 2.14013 776.849 3.24586 781.964 5.45732C787.151 7.66879 791.15 10.772 793.959 14.7669C796.841 18.6904 798.282 23.2561 798.282 28.4637V28.8917C798.282 35.6688 796.265 41.2688 792.23 45.6917C788.268 50.1146 782.757 53.0752 775.697 54.5732L798.93 81.3248H780.559ZM783.261 29.4268C783.261 24.7185 782.36 21.2943 780.559 19.1541C778.83 16.9427 776.633 15.5873 773.968 15.0879C771.374 14.5885 767.736 14.3389 763.053 14.3389C760.964 14.3389 759.163 14.3745 757.65 14.4459C750.446 14.7312 739.135 14.8739 723.719 14.8739V43.5516H763.053C767.736 43.5516 771.374 43.3376 773.968 42.9095C776.633 42.4102 778.83 41.1618 780.559 39.1643C782.36 37.0955 783.261 33.8497 783.261 29.4268Z" />
                    <path d="M876.614 36.0611C885.907 36.0611 893.688 36.4892 899.955 37.3452C906.295 38.1299 911.554 40.0204 915.732 43.0166C919.911 46.0127 922 50.5427 922 56.6064C922 67.3783 917.281 74.6548 907.844 78.4357C898.478 82.1452 887.888 84 876.073 84C869.662 84 862.926 83.2866 855.866 81.8599C848.805 80.5045 842.502 77.7223 836.955 73.5134C831.407 69.2331 828.634 63.2051 828.634 55.4293L843.438 55.0013C843.438 59.9949 845.42 63.7045 849.382 66.1299C853.416 68.5554 857.811 70.0535 862.565 70.6242C867.32 71.1949 872.363 71.4803 877.694 71.4803C885.907 71.4803 892.931 70.3745 898.766 68.1631C904.674 65.9516 907.664 62.242 907.736 57.0344V56.9274C907.736 53.4318 904.854 51.2204 899.091 50.293C893.327 49.2943 886.267 48.7949 877.91 48.7949H875.101C864.583 48.7236 856.154 48.2599 849.814 47.4038C843.547 46.5478 838.432 44.5503 834.469 41.4115C830.579 38.2726 828.634 33.4217 828.634 26.8586C828.634 15.8013 833.569 8.56051 843.438 5.1363C853.38 1.7121 864.258 0 876.073 0C882.197 0 888.681 0.713375 895.525 2.14013C902.369 3.49554 908.492 6.31337 913.895 10.5936C919.298 14.8025 922 20.7949 922 28.5707H907.195C907.195 23.5057 904.206 19.6892 898.226 17.121C892.319 14.4815 885.079 12.9834 876.506 12.6267C867.14 12.6267 859.18 13.7681 852.624 16.051C846.14 18.2624 842.898 21.758 842.898 26.5376C842.898 30.5325 845.924 33.1363 851.975 34.349C858.027 35.4904 865.267 36.0611 873.696 36.0611H876.614Z" />
                </svg>

                <div className="message">
                    Благодарим вас <br/> за заполнение формы!
                </div>
            </div>

        </div>
    );
};

export default SuccessWindow;